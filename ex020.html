<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Analisador de Número</title>
    <style>
        body {
            background: rgb(25, 161, 252);
            font: Normal 16pt Arial;
            margin: 0;
        }
        header {
            color: white;
            text-align: center;
        }
        section {
            width: 500px;
            border-radius: 10px;
            background: white;
            padding: 15px;
            margin: auto;
        }
        input {
            border-radius: 4px;
        }
        select#selnum {
            width: 150px;
        }
        footer {
            color: white;
            text-align: center;
        }
    </style>
</head>
<body>
    <header>
        <h3>Analisador de Números</h3>
    </header>
    <section>
        <div>
            <p>
                Número entre 1 e 100: <input type="number" name="Numeros" id="num">
                <input type="button" value="Adicionar" onclick="adicionar()">
            </p>
        </div>
        <select name="Resultados" id="selnum" size="10"></select><br><br>
        <input type="button" value="Finalizar" onclick="fim()">
        <div id="res">
            
        </div>  
    </section>
    <footer>
        <p>&copy; FrotaDev</p>
    </footer>

    <script>
        // variaveis globais
        var n = document.getElementById('num')
        var lista = document.querySelector('select#selnum')
        var res = document.getElementById('res')
        var valores = []
        // verificando se é numero e está entre 1 e 100
        function isNumero(n) {
            if(Number(n) >= 1 && Number(n) <= 100) {
                return true
            } else {
                return false
            }
        }
        // verificando se o numero já está na lista
        function inLista(n, I) {
            // verificando se o valor está na lista se retornar -1 não está
            if(I.indexOf(Number(n)) != -1 ) {
                return true
            } else {
                return false
            }
        }
        // função principal
        function adicionar() {
            // verificação de dados -> parametros repassados as funções acima
            if(isNumero(n.value) && !inLista(n.value, valores)) {
                valores.push(Number(n.value)) // adicionando os numeros inseridos no vetor
                var item = document.createElement('option')
                item.innerText = `Valor adicionado: ${n.value}`
                lista.appendChild(item)
                res.innerHTML = '' // quando adicionar os dados de finalizar tem que sumir
                
            } else {
                alert('Valor inválido ou já encontrado na lista.')
            }
            // voltando com focus no input com o numero inserido já apagado
            num.value = ''
            num.focus()
        }
        // função finalizar
        function fim() {
            if(valores.length == 0) {
                alert('Adicione valores antes de finalizar!')
            } else {
                // total de numeros no vetor
                var total = valores.length
                // maior e menor numero do vetor
                var maior = valores[0]
                var menor = valores[0]
                // media dos valores do vetor e soma
                var media = 0
                var soma = 0

                // verificando maior e menor valor no vetor com for e somando
                for(var pos in valores) {
                    soma += valores[pos]
                    if(valores[pos] > maior) {
                        maior = valores[pos]
                    } 
                    if(valores[pos] < menor) {
                        menor = valores[pos]
                    }
                }
                // calculo da media se sei o numero de elemento e o total da soma
                media = soma / total

                res.innerHTML = ''
                res.innerHTML += `<p>Ao todo, temos ${total} elementos cadastrados!</p>`
                res.innerHTML += `<p>O maior valor inserido é: ${maior}</p>`
                res.innerHTML += `<p>O menor valor inserido é: ${menor}</p>`
                res.innerHTML += `<p>A soma dos valores do vetor é: ${soma}</p>`
                res.innerHTML += `<p>A média de todos os valores inseridos é: ${media}</p>`
            }
        }
    </script>
    
</body>
</html>